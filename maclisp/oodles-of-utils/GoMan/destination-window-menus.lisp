(in-package :oou)(oou-provide :destination-window-menus);************************************************************************                                    ;; Copyright © 1996 Institut fuer Informatik, University of Basel, Switzerland ; All Rights Reserved;; Author: Dieter Holz;; ;; Changes (worth to be mentioned):; ------------------------------; none ;;************************************************************************;************************************************************************(oou-dependencies :3d-icon-di);------------------------------------------------------------------------(defclass destination-window-icon-di (source-window-docu-line-svm 3d-icon-di)   ()   (:default-initargs     :view-size #@(26 21)))(defun make-destination-window-menubar-icons ()  (let ((copy-icon         (make-instance 'destination-window-icon-di           :view-nick-name :copy-icon           :rsrc-id 154              :docu-line-string "Copy the selection"           :dialog-item-action #'(lambda (icon)                                   (copy (real-fred (fred-window (view-window icon)))))))        (search-icon          (make-instance 'destination-window-icon-di           :view-nick-name :search-icon           :rsrc-id 161            :docu-line-string "Search a string in the text"           :dialog-item-action #'(lambda (icon)                                   (let ((window (view-window icon)))                                     (if (search-dialog-item window)                                       (show-dialog-item window (search-dialog-item window))                                       (make-search-dialog-item window))))))        (show-source-text-icon         (make-instance 'destination-window-icon-di           :view-nick-name :manuscript-icon           :rsrc-id 159           :docu-line-string "Show the manuscript of the text"           :dialog-item-action #'(lambda (icon)                                   (show-source-window (document (view-window icon))))))        (one-step-back-icon         (make-instance 'destination-window-icon-di           :view-nick-name :go-back-icon           :rsrc-id 156           :dialog-item-enabled-p nil           :docu-line-string "Go back to the text position before the last jump"           :dialog-item-action #'(lambda (icon)                                   (let ((window (view-window icon)))                                     (jump-to-last-position window)))))        (polaroid-icon         (make-instance 'destination-window-icon-di           :view-nick-name :polaroid-icon           :rsrc-id 152           :docu-line-string "Take a picture of the current text position and put it in the archive"           :dialog-item-action  #'(lambda (icon)                                    (let ((window (view-window icon)))                                      (let ((bookmark-dialog-item (bookmark-dialog-item window)))                                        (if bookmark-dialog-item                                          (show-dialog-item window bookmark-dialog-item)                                          (progn                                             (make-bookmark-dialog-item window)                                            (view-draw-contents window)))                                        (generate-bookmark window)))))))    (list copy-icon search-icon show-source-text-icon one-step-back-icon polaroid-icon)    ))(defun make-destination-window-icons ()  (let ((contents-icon         (make-instance 'source-window-icon           :docu-line-string "the table of contents"           :view-nick-name :contents-icon           :rsrc-id 190           :di-generation-function 'make-contents-dialog-item))        (figures-icon         (make-instance 'source-window-icon           :docu-line-string "the table of figures"           :view-nick-name :figures-icon           :rsrc-id 191           :di-generation-function 'make-figures-dialog-item))        (examples-icon         (make-instance 'source-window-icon           :docu-line-string "the table of examples"           :view-nick-name :examples-icon           :rsrc-id 192           :di-generation-function 'make-examples-dialog-item))        (index-icon         (make-instance 'source-window-icon           :docu-line-string "the index"           :view-nick-name :index-icon           :rsrc-id 193           :di-generation-function 'make-index-dialog-item))        (bookmark-icon         (make-instance 'source-window-icon           :docu-line-string "all pictures"           :view-nick-name :bookmark-icon           :rsrc-id 165           :di-generation-function 'make-bookmark-dialog-item)))    (list contents-icon figures-icon examples-icon index-icon bookmark-icon)))(defparameter *goman-destination-window-icons* nil)