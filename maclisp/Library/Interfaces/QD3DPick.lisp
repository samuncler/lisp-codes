(in-package :TRAPS); Generated from QD3DPick.p; at Tuesday October 15,1996 4:10:13 pm.; ;  	File:		QD3DPick.p;  ;  	Contains:	Public picking routines 										;  ;  	Version:	Technology:	Quickdraw 3D 1.0.6;  				Release:	Universal Interfaces 2.1.5d1;  ;  	Copyright:	© 1984-1996 by Apple Computer, Inc.  All rights reserved.;  ;  	Bugs?:		If you find a problem with this file, send the file and version;  				information (from above) and the problem description to:;  ;  					Internet:	apple.bugs@applelink.apple.com;  					AppleLink:	APPLE.BUGS;  ; #|                                              ; $IFC UNDEFINED UsingIncludes; $SETC UsingIncludes := 0 |#                                             ; $ENDC; $IFC NOT UsingIncludes; $ENDC; $IFC UNDEFINED __QD3DPICK__; $SETC __QD3DPICK__ := 1; $I+; $SETC QD3DPickIncludes := UsingIncludes; $SETC UsingIncludes := 1#|                                              ; $IFC UNDEFINED __QD3D__|#(require-interface 'QD3D)#|                                              ; $I QD3D.p |#                                             ; $ENDC#|                                              ; $IFC UNDEFINED __QD3DSTYLE__|#(require-interface 'QD3DStyle)#|                                              ; $I QD3DStyle.p |#                                             ; $ENDC#|                                              ; $IFC UNDEFINED __QD3DGEOMETRY__|#(require-interface 'QD3DGeometry)#|                                              ; $I QD3DGeometry.p |#                                             ; $ENDC; $PUSH; $ALIGN POWER; $LibExport+; ; ****************************************************************************;  **																			**;  **							Mask bits for hit information 					**;  **																			**;  ****************************************************************************; (def-mactype :tq3pickdetailmasks (find-mactype ':signed-long)); TQ3PickDetailMasks(defconstant $kQ3PickDetailNone 0); TQ3PickDetailMasks(defconstant $kQ3PickDetailMaskPickID #x1); TQ3PickDetailMasks(defconstant $kQ3PickDetailMaskPath #x2); TQ3PickDetailMasks(defconstant $kQ3PickDetailMaskObject #x4); TQ3PickDetailMasks(defconstant $kQ3PickDetailMaskLocalToWorldMatrix #x8); TQ3PickDetailMasks(defconstant $kQ3PickDetailMaskXYZ #x10); TQ3PickDetailMasks(defconstant $kQ3PickDetailMaskDistance #x20); TQ3PickDetailMasks(defconstant $kQ3PickDetailMaskNormal #x40); TQ3PickDetailMasks(defconstant $kQ3PickDetailMaskShapePart #x80)(def-mactype :tq3pickdetail (find-mactype ':signed-long)); ; *****************************************************************************;  **																			 **;  **								Hitlist sorting								 **;  **																			 **;  ****************************************************************************; (def-mactype :tq3picksort (find-mactype ':signed-long)); TQ3PickSort(defconstant $kQ3PickSortNone 0); TQ3PickSort(defconstant $kQ3PickSortNearToFar 1); TQ3PickSort(defconstant $kQ3PickSortFarToNear 2); ; *****************************************************************************;  **																			 **;  **					Data structures to set up the pick object				 **;  **																			 **;  ****************************************************************************; (def-mactype :tq3pickdataptr (find-mactype '(:pointer :tq3pickdata)))(defrecord TQ3PickData    (sort :signed-long)   (mask :signed-long)   ;;Changing field numhitstoreturn from signed-long to unsigned-long to match C header (pretty-darn-sure)   (numHitsToReturn :unsigned-long)   )(def-mactype :tq3windowpointpickdataptr (find-mactype '(:pointer :tq3windowpointpickdata)))(defrecord TQ3WindowPointPickData    (data :tq3pickdata)   (point :tq3point2d)   (vertexTolerance :single-float)   (edgeTolerance :single-float)   )(def-mactype :tq3windowrectpickdataptr (find-mactype '(:pointer :tq3windowrectpickdata)))(defrecord TQ3WindowRectPickData    (data :tq3pickdata)   (rect :tq3area)   ); ; *****************************************************************************;  **																			 **;  **									Hit data								 **;  **																			 **;  ****************************************************************************; (def-mactype :tq3hitpathptr (find-mactype '(:pointer :tq3hitpath)))(defrecord TQ3HitPath    (rootGroup (:pointer :signed-long))   ;;Changing field depth from signed-long to unsigned-long to match C header (pretty-darn-sure)   (depth :unsigned-long)   (positions (:handle :signed-long))   )(def-mactype :tq3hitdataptr (find-mactype '(:pointer :tq3hitdata)))(defrecord TQ3HitData    (part :signed-long)   (validMask :signed-long)   ;;Changing field pickid from signed-long to unsigned-long to match C header (pretty-darn-sure)   (pickID :unsigned-long)   (path :tq3hitpath)   (object (:pointer :signed-long))   (localToWorldMatrix :tq3matrix4x4)   (xyzPoint :tq3point3d)   (distance :single-float)   (normal :tq3vector3d)   (shapePart (:pointer :signed-long))   ); ; *****************************************************************************;  **																			 **;  **								Pick class methods							 **;  **																			 **;  ****************************************************************************; ;; Warning: No calling method defined for this trap(deftrap-inline "_Q3Pick_GetType" ((pick (:pointer :signed-long)))   :ostype   () );; Warning: No calling method defined for this trap(deftrap-inline "_Q3Pick_GetData" ((pick (:pointer                                          :signed-long)) (data (:pointer                                                                :tq3pickdata)))   :signed-long   () ); CONST;; Warning: No calling method defined for this trap(deftrap-inline "_Q3Pick_SetData" ((pick (:pointer                                          :signed-long)) (data (:pointer                                                                :tq3pickdata)))   :signed-long   () );; Warning: No calling method defined for this trap(deftrap-inline "_Q3Pick_GetVertexTolerance" ((pick (:pointer                                                     :signed-long)) (vertexTolerance (:pointer                                                                                      :single-float)))   :signed-long   () );; Warning: No calling method defined for this trap(deftrap-inline "_Q3Pick_GetEdgeTolerance" ((pick (:pointer                                                   :signed-long)) (edgeTolerance (:pointer                                                                                  :single-float)))   :signed-long   () );; Warning: No calling method defined for this trap(deftrap-inline "_Q3Pick_SetVertexTolerance" ((pick (:pointer                                                     :signed-long)) (vertexTolerance :single-float))   :signed-long   () );; Warning: No calling method defined for this trap(deftrap-inline "_Q3Pick_SetEdgeTolerance" ((pick (:pointer                                                   :signed-long)) (edgeTolerance :single-float))   :signed-long   () );; Warning: No calling method defined for this trap(deftrap-inline "_Q3Pick_GetNumHits" ((pick (:pointer                                             :signed-long)) (numHits (:pointer                                                                      :signed-long)))   :signed-long   () );; Warning: No calling method defined for this trap(deftrap-inline "_Q3Pick_GetHitData" ((pick (:pointer                                             :signed-long)) (index :signed-long) (hitData (:pointer                                                                                           :tq3hitdata)))   :signed-long   () );; Warning: No calling method defined for this trap(deftrap-inline "_Q3Hit_EmptyData" ((hitData (:pointer :tq3hitdata)))   :signed-long   () );; Warning: No calling method defined for this trap(deftrap-inline "_Q3Pick_EmptyHitList" ((pick (:pointer :signed-long)))   :signed-long   () ); ; *****************************************************************************;  **																			 **;  **							Window point pick methods						 **;  **																			 **;  ****************************************************************************; ; CONST;; Warning: No calling method defined for this trap(deftrap-inline "_Q3WindowPointPick_New" ((data (:pointer                                                 :tq3windowpointpickdata)))   (:pointer :signed-long)   () );; Warning: No calling method defined for this trap(deftrap-inline "_Q3WindowPointPick_GetPoint" ((pick (:pointer                                                      :signed-long)) (point (:pointer                                                                             :tq3point2d)))   :signed-long   () ); CONST;; Warning: No calling method defined for this trap(deftrap-inline "_Q3WindowPointPick_SetPoint" ((pick (:pointer                                                      :signed-long)) (point (:pointer                                                                             :tq3point2d)))   :signed-long   () );; Warning: No calling method defined for this trap(deftrap-inline "_Q3WindowPointPick_GetData" ((pick (:pointer                                                     :signed-long)) (data (:pointer                                                                           :tq3windowpointpickdata)))   :signed-long   () ); CONST;; Warning: No calling method defined for this trap(deftrap-inline "_Q3WindowPointPick_SetData" ((pick (:pointer                                                     :signed-long)) (data (:pointer                                                                           :tq3windowpointpickdata)))   :signed-long   () ); ; *****************************************************************************;  **																			 **;  **							Window rect pick methods						 **;  **																			 **;  ****************************************************************************; ; CONST;; Warning: No calling method defined for this trap(deftrap-inline "_Q3WindowRectPick_New" ((data (:pointer                                                :tq3windowrectpickdata)))   (:pointer :signed-long)   () );; Warning: No calling method defined for this trap(deftrap-inline "_Q3WindowRectPick_GetRect" ((pick (:pointer                                                    :signed-long)) (rect (:pointer                                                                          :tq3area)))   :signed-long   () ); CONST;; Warning: No calling method defined for this trap(deftrap-inline "_Q3WindowRectPick_SetRect" ((pick (:pointer                                                    :signed-long)) (rect (:pointer                                                                          :tq3area)))   :signed-long   () );; Warning: No calling method defined for this trap(deftrap-inline "_Q3WindowRectPick_GetData" ((pick (:pointer                                                    :signed-long)) (data (:pointer                                                                          :tq3windowrectpickdata)))   :signed-long   () ); CONST;; Warning: No calling method defined for this trap(deftrap-inline "_Q3WindowRectPick_SetData" ((pick (:pointer                                                    :signed-long)) (data (:pointer                                                                          :tq3windowrectpickdata)))   :signed-long   () ); ; *****************************************************************************;  **																			 **;  **								Shape Part methods							 **;  **																			 **;  ****************************************************************************; ;; Warning: No calling method defined for this trap(deftrap-inline "_Q3ShapePart_GetType" ((shapePartObject (:pointer                                                          :signed-long)))   :ostype   () );; Warning: No calling method defined for this trap(deftrap-inline "_Q3MeshPart_GetType" ((meshPartObject (:pointer                                                        :signed-long)))   :ostype   () );; Warning: No calling method defined for this trap(deftrap-inline "_Q3ShapePart_GetShape" ((shapePartObject (:pointer                                                           :signed-long)) (shapeObject (:pointer                                                                                        (:pointer                                                                                         :signed-long))))   :signed-long   () );; Warning: No calling method defined for this trap(deftrap-inline "_Q3MeshPart_GetComponent" ((meshPartObject (:pointer                                                             :signed-long)) (component (:pointer                                                                                        (:pointer                                                                                         :signed-long))))   :signed-long   () );; Warning: No calling method defined for this trap(deftrap-inline "_Q3MeshFacePart_GetFace" ((meshFacePartObject (:pointer                                                                :signed-long)) (face (:pointer                                                                                      (:pointer                                                                                       :signed-long))))   :signed-long   () );; Warning: No calling method defined for this trap(deftrap-inline "_Q3MeshEdgePart_GetEdge" ((meshEdgePartObject (:pointer                                                                :signed-long)) (edge (:pointer                                                                                      (:pointer                                                                                       :signed-long))))   :signed-long   () );; Warning: No calling method defined for this trap(deftrap-inline "_Q3MeshVertexPart_GetVertex" ((meshVertexPartObject (:pointer                                                                      :signed-long)) (vertex (:pointer                                                                                              (:pointer                                                                                               :signed-long))))   :signed-long   () ); $ALIGN RESET; $POP; $SETC UsingIncludes := QD3DPickIncludes; $ENDC                                         ; __QD3DPICK__; $IFC NOT UsingIncludes; $ENDC(provide-interface 'QD3DPick)